<script>
  function openForm() {
    document.getElementById("myForm").style.display = "block";
  }

  function closeForm() {
    document.getElementById("myForm").style.display = "none";
  }
</script>

<button class="open-button" *ngIf="chatIsVisible" (click)="openForm()">Chat</button>

<div class="chat-popup" id="myForm" *ngIf="!chatIsVisible">
  <form style="border: inset;" #chatMessage="ngForm" action="" class="form-container" (ngSubmit)="sendMessage('NA', chatMessage.value.input)">
    <h1>Chat</h1>
    <label for="msg"><b>Message</b></label>
    <div class="message-container" #scrollMe>
      <ng-container *ngFor="let message of messages">
        <div class="message">
          <span class="playerUserName">{{ message.playerUserName }}: </span>
          <img *ngIf="message.imageFile !== 'NA'" [src]="imageBase + message.imageFile" class="message-content"/>
          <p *ngIf="message.imageFile === 'NA'">{{ message.note }}</p>
        </div>
      </ng-container>
    </div>
    <div class="chat-input emoticon-select">
      <button class="image-button" (click)="sendMessage('Angry.png', 'NA')">
        <img src= {{angryImgSrc}} alt="Angry Emoticon" />
      </button>
      
      <button class="image-button" (click)="sendMessage('GG.png', 'NA')">
        <img src= {{ggImgSrc}} alt="Good Game Emoticon" />
      </button>
      
      <button class="image-button" (click)="sendMessage('Wow.png', 'NA')">
        <img src= {{wowImgSrc}} alt="Wow Emoticon" />
      </button>
      <input style="width: 100%; height: 50px;" #messageInput placeholder="Type message..." name="input" ngModel/>

      <button type="button" class="btn cancel" name="chatMe" (click)="closeForm()">{{CloseChat?"Close":"Close"}}</button>
    </div>
  </form>
</div>
